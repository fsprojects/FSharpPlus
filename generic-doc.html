<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Generic operators and functions
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content="F#+ is a base library for F#."/>
    <meta name="author" content="Gusty"/>

    <script src="https://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="https://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet"/>

    <link type="text/css" rel="stylesheet" href="/FSharpPlus/content/style.css" />
    <script type="text/javascript" src="/FSharpPlus/content/tips.js"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li><a href="http://fsharp.org">fsharp.org</a></li>
          <li><a href="https://github.com/gusty/FSharpPlus">github page</a></li>
        </ul>
        <h3 class="muted"><a href="/FSharpPlus/index.html">FSharpPlus</a></h3>
      </div>
      <hr />
      <div class="row">
        <div class="span9" id="main">
          
<h1><a name="Generic-operators-and-functions" class="anchor" href="#Generic-operators-and-functions">Generic operators and functions</a></h1>
<p>Generic operators, functions and constants are included in this library.</p>
<p>They work with many types, including:</p>
<p>1) Existing .NET and F# types</p>
<p>2) Other types included in this library</p>
<p>3) Further user defined types</p>
<p>4) Types defined in other libraries</p>
<p>Case 1 works by using overload resolution inside an internal class (referred to as the Invokable) used at the definition of the generic operation, while all the other cases work typically through Duck Typing, where an expected method name and signature must exists in the target Type or by using default implementations based on other operations.</p>
<p>Here are some examples of the generic <code>map</code> operation over existing .NET and F# types:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="i">map</span> <span class="i">string</span> [|<span class="n">2</span>;<span class="n">3</span>;<span class="n">4</span>;<span class="n">5</span>|]
<span class="c">// val it : string [] = [|&quot;2&quot;; &quot;3&quot;; &quot;4&quot;; &quot;5&quot;|]</span>

<span class="i">map</span> ((<span class="o">+</span>) <span class="n">9</span>) (<span class="i">Some</span> <span class="n">3</span>)
<span class="c">// val it : int option = Some 12</span>

<span class="i">map</span> ((<span class="o">+</span>) <span class="n">9</span>) (<span class="i">async</span> {<span class="k">return</span> <span class="n">3</span>});;
<span class="c">// val it : Async&lt;int&gt; = Microsoft.FSharp.Control.FSharpAsync`1[System.Int32]</span>
<span class="i">extract</span> <span class="i">it</span>;;
<span class="c">// val it : int = 12</span>
</code></pre></td>
</tr>
</table>
<p>Here are some examples with types defined in this library:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
<span class="l">9: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span class="i">FSharpPlus</span><span class="o">.</span><span class="i">Data</span>

<span class="i">map</span> <span class="i">string</span> (<span class="i">NonEmptyList</span><span class="o">.</span><span class="i">create</span> <span class="n">2</span> [<span class="n">3</span>;<span class="n">4</span>;<span class="n">5</span>])
<span class="c">// val it : NonEmptyList&lt;string&gt; = {Head = &quot;2&quot;; Tail = [&quot;3&quot;; &quot;4&quot;; &quot;5&quot;];}</span>

<span class="k">let</span> <span class="i">stateFul42</span> <span class="o">=</span> <span class="i">map</span> <span class="i">string</span> (<span class="i">State</span> (<span class="k">fun</span> <span class="i">x</span> <span class="k">-&gt;</span> (<span class="n">42</span>, <span class="i">x</span>)))
<span class="i">State</span><span class="o">.</span><span class="i">run</span> <span class="i">stateFul42</span> <span class="s">&quot;state&quot;</span>
<span class="c">// val stateFul42 : State&lt;string,string&gt; = State &lt;fun:map@12-9&gt;</span>
<span class="c">// val it : string * string = (&quot;42&quot;, &quot;state&quot;)</span>
</code></pre></td>
</tr>
</table>
<p>Now let's define our own type with its own map definition</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span class="i">Tree</span><span class="o">&lt;</span><span class="o">&#39;</span><span class="i">t</span><span class="o">&gt;</span> <span class="o">=</span>
    | <span class="i">Tree</span> <span class="k">of</span> <span class="o">&#39;</span><span class="i">t</span> <span class="o">*</span> <span class="i">Tree</span><span class="o">&lt;</span><span class="o">&#39;</span><span class="i">t</span><span class="o">&gt;</span> <span class="o">*</span> <span class="i">Tree</span><span class="o">&lt;</span><span class="o">&#39;</span><span class="i">t</span><span class="o">&gt;</span>
    | <span class="i">Leaf</span> <span class="k">of</span> <span class="o">&#39;</span><span class="i">t</span>
    <span class="k">static</span> <span class="k">member</span> <span class="i">Map</span> (<span class="i">x</span><span class="o">:</span><span class="i">Tree</span><span class="o">&lt;</span><span class="o">&#39;</span><span class="i">a</span><span class="o">&gt;</span>, <span class="i">f</span>) <span class="o">=</span> 
        <span class="k">let</span> <span class="k">rec</span> <span class="i">loop</span> <span class="i">f</span> <span class="o">=</span> <span class="k">function</span>
            | <span class="i">Leaf</span> <span class="i">x</span> <span class="k">-&gt;</span> <span class="i">Leaf</span> (<span class="i">f</span> <span class="i">x</span>)
            | <span class="i">Tree</span> (<span class="i">x</span>, <span class="i">t1</span>, <span class="i">t2</span>) <span class="k">-&gt;</span> <span class="i">Tree</span> (<span class="i">f</span> <span class="i">x</span>, <span class="i">loop</span> <span class="i">f</span> <span class="i">t1</span>, <span class="i">loop</span> <span class="i">f</span> <span class="i">t2</span>)
        <span class="i">loop</span> <span class="i">f</span> <span class="i">x</span>

<span class="i">map</span> (<span class="o">(*)</span> <span class="n">10</span>) (<span class="i">Tree</span>(<span class="n">6</span>, <span class="i">Tree</span>(<span class="n">2</span>, <span class="i">Leaf</span> <span class="n">1</span>, <span class="i">Leaf</span> <span class="n">3</span>), <span class="i">Leaf</span> <span class="n">9</span>))
<span class="c">// val it : Tree&lt;int&gt; = Tree (60,Tree (20,Leaf 10,Leaf 30),Leaf 90)</span>
</code></pre></td>
</tr>
</table>
<p>For a type defined in an external library it will work when it contains a static member matching the expected name and signature.</p>
<p>Here's an example of the generic function <code>fromBigInt</code> targeting a type defined in the MathNet library</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="prep">#r</span> <span class="s">&quot;../../packages/test/MathNet.Numerics/lib/net40/MathNet.Numerics.dll&quot;</span>
<span class="prep">#r</span> <span class="s">&quot;../../packages/test/MathNet.Numerics.FSharp/lib/net40/MathNet.Numerics.FSharp.dll&quot;</span>

<span class="k">let</span> <span class="i">x</span> <span class="o">:</span> <span class="i">MathNet</span><span class="o">.</span><span class="i">Numerics</span><span class="o">.</span><span class="i">BigRational</span> <span class="o">=</span> <span class="i">fromBigInt</span> <span class="n">10I</span>
</code></pre></td>
</tr>
</table>


        </div>
        <div class="span3">
          <img src="/FSharpPlus/img/logo.png" alt="F# Project" style="width:150px;margin:10px" />  
          <ul class="nav nav-list" id="menu" style="margin-top: 20px;">
            <li class="nav-header">FSharpPlus</li>
            <li><a href="/FSharpPlus/index.html">Home page</a></li>
            <li class="divider"></li>
            <li><a href="http://nuget.org/packages/FSharpPlus">Get Library via NuGet</a></li>
            <li><a href="https://github.com/gusty/FSharpPlus">Source Code on GitHub</a></li>
            <li><a href="/FSharpPlus/license.html">License</a></li>
            <li><a href="/FSharpPlus/release-notes.html">Release Notes</a></li>
            
            <li class="nav-header">Getting started</li>
            <li><a href="/FSharpPlus/tutorial.html">Tutorial</a></li>

            <li class="nav-header">Documentation</li>
            <li><a href="/FSharpPlus/abstractions.html">Abstractions</a></li>
            <li><a href="/FSharpPlus/reference/index.html">API Reference</a></li>			
          </ul>
        </div>
      </div>
    </div>
    <a href="https://github.com/gusty/FSharpPlus"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"/></a>
  </body>
  </html>
